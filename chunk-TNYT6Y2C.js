import{$ as N,A as P,E as D,F as k,Q as s,X as T,Z as V,_ as F,ba as y,ca as E,da as $,ea as j,l as A,y as H}from"./chunk-UCS4EAVF.js";import{Aa as d,Ba as u,Cb as n,Eb as x,Hb as w,Jb as v,Kb as M,Sa as S,Ta as p,f as I,hb as b,nb as _,ob as l,pa as g,pb as a,rb as C,tb as h,ub as m}from"./chunk-Z4HVJDSC.js";function O(o,i){if(o&1){let r=C();l(0,"section")(1,"p"),n(2),v(3,"timeFormat"),a(),l(4,"div")(5,"button",0),h("click",function(){d(r);let t=m();return u(t.pauseHomeIdle())}),n(6,"Pause Home Idle"),a(),n(7," \xA0 "),l(8,"button",0),h("click",function(){d(r);let t=m();return u(t.continueHomeIdle())}),n(9,"Continue Home Idle"),a(),n(10," \xA0 "),l(11,"button",0),h("click",function(){d(r);let t=m();return u(t.restartHomeIdle())}),n(12,"Restart Home Idle"),a()()()}if(o&2){let r=m();S(2),x("Single Idle in ProductComponent\uFF1A",M(3,1,r.productIdleSec),"")}}var tt=(()=>{let i=class i{constructor(e,t,c){this.router=e,this.dialog=t,this.store=c,this.subscription=null,this.componentName="productComponent"}ngOnInit(){this.startSingleIdle()}startSingleIdle(){if(this.subscription===null){let e={warningSec:s.warningSec,timeoutSec:s.timeoutSec};this.store.dispatch(T({component:this.componentName,configSingleIdleConfig:e})),this.productIdleSec$=this.store.pipe(k(y(this.componentName))),this.subscription=new I,this.subscription.add(this.productIdleSec$.subscribe(t=>{this.productIdleSec=t;let c=Math.floor(s.timeoutSec/60),B=Math.floor(s.warningSec/60);if(t===0){let f=`\u60A8\u7684\u9592\u7F6E\u6642\u9593\u5DF2\u8D85\u904E ${c} \u5206\u9418\uFF0C\u7CFB\u7D71\u5DF2\u5C07\u60A8\u767B\u51FA-home\u3002`;this.showDialog(f).subscribe(()=>{this.unsubscribe(),this.router.navigate(["/login"])})}else if(t===s.warningSec){console.log("ProductIdleConfig warning");let f=`\u60A8\u7684\u9592\u7F6E\u6642\u9593\u5DF2\u8D85\u904E ${B} \u5206\u9418\uFF0C\u82E5\u8981\u7E7C\u7E8C\u4F7F\u7528\uFF0C\u8ACB\u9EDE\u64CA\u78BA\u8A8D\u3002`;this.showDialog(f).subscribe(()=>{this.startSingleIdle()})}}))}else this.unsubscribe(),this.startSingleIdle()}pauseHomeIdle(){this.store.dispatch(V({component:this.componentName}))}continueHomeIdle(){this.store.dispatch(F({component:this.componentName}))}restartHomeIdle(){this.startSingleIdle()}showDialog(e){return this.dialog.open(j,{data:{content:e}}).afterClosed()}unsubscribe(){this.store.dispatch(N({component:this.componentName})),this.subscription?.unsubscribe(),this.subscription=null}ngOnDestroy(){this.unsubscribe()}};i.\u0275fac=function(t){return new(t||i)(p(A),p($),p(D))},i.\u0275cmp=g({type:i,selectors:[["app-products"]],standalone:!0,features:[w],decls:1,vars:1,consts:[["mat-raised-button","","color","accent",3,"click"]],template:function(t,c){t&1&&b(0,O,13,3,"section"),t&2&&_(0,c.productIdleSec>=0?0:-1)},dependencies:[E,P,H]});let o=i;return o})();export{tt as default};
